import{ao as P,c as q,t as z,h as G,ap as U,m as X,B as x,x as H,ak as J}from"../chunks/theme.752db845.js";import{s as K,f as $,a as R,g as b,h as v,d,c as j,j as g,k as y,i as O,v as A,G as Q,F as D,l as W,m as Y,n as Z,X as B,A as ee}from"../chunks/scheduler.1839fe44.js";import{S as te,i as ne,b as k,d as w,m as E,a as p,c as oe,t as S,e as N,g as ae}from"../chunks/index.9a9a87ad.js";import{e as I}from"../chunks/each.821dfe5c.js";import{S as re,g as L,a as F}from"../chunks/ShareIcon.96c40192.js";import{I as se}from"../chunks/IconCard.ad05521e.js";import{t as M,S as ce,s as le,a as T,b as ie,c as _e}from"../chunks/annotation-share.39f5c26b.js";import{N as ue}from"../chunks/NoteIcon.3da15fe0.js";import{N as fe}from"../chunks/Navbar.3f779d19.js";import{f as me}from"../chunks/dateUtils.b75773c7.js";import{p as he}from"../chunks/stores.f3b75e2e.js";import{e as de}from"../chunks/singletons.a4b0b5e6.js";async function pe({depends:i}){const n=(await P()).filter(e=>q.bookCollections.some(_=>_.id===e.collection));return i("notes"),console.log("Notes",n),{notes:n}}const Ce=Object.freeze(Object.defineProperty({__proto__:null,load:pe},Symbol.toStringTag,{value:"Module"}));function V(i,t,n){const e=i.slice();e[10]=t[n];const _={docSet:e[10].docSet,collection:e[10].collection,book:e[10].book,chapter:e[10].chapter,verse:e[10].verse,reference:e[10].reference,text:e[10].text,date:me(new Date(e[10].date)),actions:[e[1].Annotation_Menu_View,e[1].Annotation_Menu_Edit,e[1].Annotation_Menu_Share,e[1].Annotation_Menu_Delete]};return e[11]=_,e}function ge(i){let t,n,e=i[1].Annotation_Notes+"",_;return{c(){t=$("label"),n=$("div"),_=W(e),this.h()},l(s){t=b(s,"LABEL",{for:!0,slot:!0});var a=v(t);n=b(a,"DIV",{class:!0});var u=v(n);_=Y(u,e),u.forEach(d),a.forEach(d),this.h()},h(){g(n,"class","btn btn-ghost normal-case text-xl"),g(t,"for","sidebar"),g(t,"slot","center")},m(s,a){O(s,t,a),A(t,n),A(n,_)},p(s,a){a&2&&e!==(e=s[1].Annotation_Notes+"")&&Z(_,e)},d(s){s&&d(t)}}}function $e(i){let t,n,e,_,s,a,u,c;e=new re({props:{color:"white"}});const h=[i[6]];let l={};for(let o=0;o<h.length;o+=1)l=B(l,h[o]);return s=new ce({props:l}),s.$on("menuaction",i[8]),{c(){t=$("div"),n=$("button"),k(e.$$.fragment),_=R(),k(s.$$.fragment),this.h()},l(o){t=b(o,"DIV",{slot:!0});var f=v(t);n=b(f,"BUTTON",{class:!0});var r=v(n);w(e.$$.fragment,r),r.forEach(d),_=j(f),w(s.$$.fragment,f),f.forEach(d),this.h()},h(){g(n,"class","dy-btn dy-btn-ghost dy-btn-circle"),g(t,"slot","right-buttons")},m(o,f){O(o,t,f),A(t,n),E(e,n,null),A(t,_),E(s,t,null),a=!0,u||(c=ee(n,"click",i[7]),u=!0)},p(o,f){const r=f&64?L(h,[F(o[6])]):{};s.$set(r)},i(o){a||(p(e.$$.fragment,o),p(s.$$.fragment,o),a=!0)},o(o){S(e.$$.fragment,o),S(s.$$.fragment,o),a=!1},d(o){o&&d(t),N(e),N(s),u=!1,c()}}}function be(i){let t,n;return t=new ue({props:{slot:"icon",color:i[3]}}),{c(){k(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,_){E(t,e,_),n=!0},p(e,_){const s={};_&8&&(s.color=e[3]),t.$set(s)},i(e){n||(p(t.$$.fragment,e),n=!0)},o(e){S(t.$$.fragment,e),n=!1},d(e){N(t,e)}}}function C(i){let t,n;const e=[i[11]];function _(...a){return i[9](i[10],...a)}let s={$$slots:{icon:[be]},$$scope:{ctx:i}};for(let a=0;a<e.length;a+=1)s=B(s,e[a]);return t=new se({props:s}),t.$on("menuaction",_),{c(){k(t.$$.fragment)},l(a){w(t.$$.fragment,a)},m(a,u){E(t,a,u),n=!0},p(a,u){i=a;const c=u&7?L(e,[F(i[11])]):{};u&16392&&(c.$$scope={dirty:u,ctx:i}),t.$set(c)},i(a){n||(p(t.$$.fragment,a),n=!0)},o(a){S(t.$$.fragment,a),n=!1},d(a){N(t,a)}}}function ve(i){let t,n,e,_,s,a;e=new fe({props:{$$slots:{"right-buttons":[$e],center:[ge]},$$scope:{ctx:i}}});let u=I(M(i[2].data.notes,i[0])),c=[];for(let l=0;l<u.length;l+=1)c[l]=C(V(i,u,l));const h=l=>S(c[l],1,1,()=>{c[l]=null});return{c(){t=$("div"),n=$("div"),k(e.$$.fragment),_=R(),s=$("div");for(let l=0;l<c.length;l+=1)c[l].c();this.h()},l(l){t=b(l,"DIV",{class:!0,style:!0});var o=v(t);n=b(o,"DIV",{class:!0});var f=v(n);w(e.$$.fragment,f),f.forEach(d),_=j(o),s=b(o,"DIV",{class:!0});var r=v(s);for(let m=0;m<c.length;m+=1)c[m].l(r);r.forEach(d),o.forEach(d),this.h()},h(){g(n,"class","navbar"),g(s,"class","overflow-y-auto p-2.5"),g(t,"class","grid grid-rows-[auto,1fr]"),y(t,"height","100vh"),y(t,"height","100dvh")},m(l,o){O(l,t,o),A(t,n),E(e,n,null),A(t,_),A(t,s);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(s,null);a=!0},p(l,[o]){const f={};if(o&16391&&(f.$$scope={dirty:o,ctx:l}),e.$set(f),o&31){u=I(M(l[2].data.notes,l[0]));let r;for(r=0;r<u.length;r+=1){const m=V(l,u,r);c[r]?(c[r].p(m,o),p(c[r],1)):(c[r]=C(m),c[r].c(),p(c[r],1),c[r].m(s,null))}for(ae(),r=u.length;r<c.length;r+=1)h(r);oe()}},i(l){if(!a){p(e.$$.fragment,l);for(let o=0;o<u.length;o+=1)p(c[o]);a=!0}},o(l){S(e.$$.fragment,l),c=c.filter(Boolean);for(let o=0;o<c.length;o+=1)S(c[o]);a=!1},d(l){l&&d(t),N(e),Q(c,l)}}}function Ae(i,t,n){let e,_,s;D(i,z,r=>n(1,e=r)),D(i,he,r=>n(2,_=r)),D(i,G,r=>n(3,s=r));async function a(r,m){switch(r.detail.text){case e.Annotation_Menu_View:H.set(m),J(`${de}/`);break;case e.Annotation_Menu_Edit:X.open(x,m);break;case e.Annotation_Menu_Share:await le(m);break;case e.Annotation_Menu_Delete:await U(m.date);break}}function u(r){switch(r.detail.text){case e.Annotation_Sort_Order_Reference:n(0,h=ie);break;case e.Annotation_Sort_Order_Date:n(0,h=T);break}}const c={actions:[e.Annotation_Sort_Order_Reference,e.Annotation_Sort_Order_Date]};let h=T;return[h,e,_,s,a,u,c,async()=>await _e(M(_.data.notes,h)),r=>u(r),(r,m)=>a(m,r)]}class Re extends te{constructor(t){super(),ne(this,t,Ae,ve,K,{})}}export{Re as component,Ce as universal};
