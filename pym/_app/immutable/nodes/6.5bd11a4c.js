import{al as he,c as _e,x as G,t as ue,am as de,ak as me}from"../chunks/theme.752db845.js";import{s as re,f as b,a as V,l as N,g as p,h as S,d as m,c as I,m as B,j as g,k as F,i as P,v as d,A as U,n as L,E as ge,a0 as ve,G as be,F as ee,X as se}from"../chunks/scheduler.1839fe44.js";import{S as le,i as ie,b as M,d as R,m as j,a as w,t as y,e as T,c as pe,g as Se}from"../chunks/index.9a9a87ad.js";import{e as te}from"../chunks/each.821dfe5c.js";import{S as ke,g as ce,a as fe}from"../chunks/ShareIcon.96c40192.js";import{e as X}from"../chunks/singletons.a4b0b5e6.js";import{C as Ee,t as J,S as Ae,s as De,d as Ce,a as ne,b as we,c as ye}from"../chunks/annotation-share.39f5c26b.js";import{N as Oe}from"../chunks/Navbar.3f779d19.js";import{f as Ve}from"../chunks/dateUtils.b75773c7.js";import{p as Ie}from"../chunks/stores.f3b75e2e.js";async function Me({depends:i}){const n=(await he()).filter(e=>_e.bookCollections.some(h=>h.id===e.collection));return i("highlights"),{highlights:n}}const We=Object.freeze(Object.defineProperty({__proto__:null,load:Me},Symbol.toStringTag,{value:"Module"}));function Re(i){let t,n,e,h,l,o,_,r,k,s,a,f,c,v,u,q,O,H,C,z,K;return a=new Ee({props:{actions:i[7]}}),a.$on("menuaction",i[10]),{c(){t=b("div"),n=b("div"),e=b("div"),l=V(),o=b("div"),_=b("a"),r=N(i[3]),k=V(),s=b("div"),M(a.$$.fragment),f=V(),c=b("div"),v=b("a"),u=N(i[4]),q=V(),O=b("div"),H=N(i[5]),this.h()},l(E){t=p(E,"DIV",{class:!0});var D=S(t);n=p(D,"DIV",{class:!0});var A=S(n);e=p(A,"DIV",{class:!0}),S(e).forEach(m),l=I(A),o=p(A,"DIV",{class:!0});var Q=S(o);_=p(Q,"A",{style:!0,href:!0});var W=S(_);r=B(W,i[3]),W.forEach(m),Q.forEach(m),k=I(A),s=p(A,"DIV",{class:!0});var Y=S(s);R(a.$$.fragment,Y),Y.forEach(m),f=I(A),c=p(A,"DIV",{class:!0});var Z=S(c);v=p(Z,"A",{style:!0,href:!0});var x=S(v);u=B(x,i[4]),x.forEach(m),Z.forEach(m),q=I(A),O=p(A,"DIV",{class:!0});var $=S(O);H=B($,i[5]),$.forEach(m),A.forEach(m),D.forEach(m),this.h()},h(){g(e,"class",h="annotation-item-color "+("hlp"+i[8].toString())+" self-center svelte-1nhhpt8"),F(_,"text-decoration","none"),g(_,"href",X+"/"),g(o,"class","annotation-item-reference justify-self-start self-center"),g(s,"class","self-center justify-self-end"),F(v,"text-decoration","none"),g(v,"href",X+"/"),g(c,"class","annotation-item-text col-start-2 col-end-3"),g(O,"class","annotation-item-date col-span-3 justify-self-end"),g(n,"class","color-card svelte-1nhhpt8"),g(t,"class","annotation-item-block dy-card")},m(E,D){P(E,t,D),d(t,n),d(n,e),d(n,l),d(n,o),d(o,_),d(_,r),d(n,k),d(n,s),j(a,s,null),d(n,f),d(n,c),d(c,v),d(v,u),d(n,q),d(n,O),d(O,H),C=!0,z||(K=[U(_,"click",i[9]),U(v,"click",i[11])],z=!0)},p(E,[D]){(!C||D&256&&h!==(h="annotation-item-color "+("hlp"+E[8].toString())+" self-center svelte-1nhhpt8"))&&g(e,"class",h),(!C||D&8)&&L(r,E[3]);const A={};D&128&&(A.actions=E[7]),a.$set(A),(!C||D&16)&&L(u,E[4]),(!C||D&32)&&L(H,E[5])},i(E){C||(w(a.$$.fragment,E),C=!0)},o(E){y(a.$$.fragment,E),C=!1},d(E){E&&m(t),T(a),z=!1,ge(K)}}}function je(i,t,n){let{docSet:e=""}=t,{book:h=""}=t,{chapter:l=""}=t,{reference:o=""}=t,{text:_=""}=t,{date:r=""}=t,{verse:k=""}=t,{actions:s=[""]}=t,{penColor:a=1}=t;const f=()=>G.set({docSet:e,book:h,chapter:l,verse:k});function c(u){ve.call(this,i,u)}const v=()=>G.set({docSet:e,book:h,chapter:l,verse:k});return i.$$set=u=>{"docSet"in u&&n(0,e=u.docSet),"book"in u&&n(1,h=u.book),"chapter"in u&&n(2,l=u.chapter),"reference"in u&&n(3,o=u.reference),"text"in u&&n(4,_=u.text),"date"in u&&n(5,r=u.date),"verse"in u&&n(6,k=u.verse),"actions"in u&&n(7,s=u.actions),"penColor"in u&&n(8,a=u.penColor)},[e,h,l,o,_,r,k,s,a,f,c,v]}class Te extends le{constructor(t){super(),ie(this,t,je,Re,re,{docSet:0,book:1,chapter:2,reference:3,text:4,date:5,verse:6,actions:7,penColor:8})}}function ae(i,t,n){const e=i.slice();e[9]=t[n];const h={docSet:e[9].docSet,book:e[9].book,chapter:e[9].chapter,verse:e[9].verse,reference:e[9].reference,text:e[9].text,date:Ve(new Date(e[9].date)),actions:[e[1].Annotation_Menu_View,e[1].Annotation_Menu_Share,e[1].Annotation_Menu_Delete],penColor:e[9].penColor};return e[10]=h,e}function He(i){let t,n,e=i[1].Annotation_Highlights+"",h;return{c(){t=b("label"),n=b("div"),h=N(e),this.h()},l(l){t=p(l,"LABEL",{for:!0,slot:!0});var o=S(t);n=p(o,"DIV",{class:!0});var _=S(n);h=B(_,e),_.forEach(m),o.forEach(m),this.h()},h(){g(n,"class","btn btn-ghost normal-case text-xl"),g(t,"for","sidebar"),g(t,"slot","center")},m(l,o){P(l,t,o),d(t,n),d(n,h)},p(l,o){o&2&&e!==(e=l[1].Annotation_Highlights+"")&&L(h,e)},d(l){l&&m(t)}}}function Ne(i){let t,n,e,h,l,o,_,r;e=new ke({props:{color:"white"}});const k=[i[5]];let s={};for(let a=0;a<k.length;a+=1)s=se(s,k[a]);return l=new Ae({props:s}),l.$on("menuaction",i[7]),{c(){t=b("div"),n=b("button"),M(e.$$.fragment),h=V(),M(l.$$.fragment),this.h()},l(a){t=p(a,"DIV",{slot:!0});var f=S(t);n=p(f,"BUTTON",{class:!0});var c=S(n);R(e.$$.fragment,c),c.forEach(m),h=I(f),R(l.$$.fragment,f),f.forEach(m),this.h()},h(){g(n,"class","dy-btn dy-btn-ghost dy-btn-circle"),g(t,"slot","right-buttons")},m(a,f){P(a,t,f),d(t,n),j(e,n,null),d(t,h),j(l,t,null),o=!0,_||(r=U(n,"click",i[6]),_=!0)},p(a,f){const c=f&32?ce(k,[fe(a[5])]):{};l.$set(c)},i(a){o||(w(e.$$.fragment,a),w(l.$$.fragment,a),o=!0)},o(a){y(e.$$.fragment,a),y(l.$$.fragment,a),o=!1},d(a){a&&m(t),T(e),T(l),_=!1,r()}}}function oe(i){let t,n;const e=[i[10]];function h(...o){return i[8](i[9],...o)}let l={};for(let o=0;o<e.length;o+=1)l=se(l,e[o]);return t=new Te({props:l}),t.$on("menuaction",h),{c(){M(t.$$.fragment)},l(o){R(t.$$.fragment,o)},m(o,_){j(t,o,_),n=!0},p(o,_){i=o;const r=_&7?ce(e,[fe(i[10])]):{};t.$set(r)},i(o){n||(w(t.$$.fragment,o),n=!0)},o(o){y(t.$$.fragment,o),n=!1},d(o){T(t,o)}}}function Be(i){let t,n,e,h,l,o;e=new Oe({props:{$$slots:{"right-buttons":[Ne],center:[He]},$$scope:{ctx:i}}});let _=te(J(i[2].data.highlights,i[0])),r=[];for(let s=0;s<_.length;s+=1)r[s]=oe(ae(i,_,s));const k=s=>y(r[s],1,1,()=>{r[s]=null});return{c(){t=b("div"),n=b("div"),M(e.$$.fragment),h=V(),l=b("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){t=p(s,"DIV",{class:!0,style:!0});var a=S(t);n=p(a,"DIV",{class:!0});var f=S(n);R(e.$$.fragment,f),f.forEach(m),h=I(a),l=p(a,"DIV",{class:!0});var c=S(l);for(let v=0;v<r.length;v+=1)r[v].l(c);c.forEach(m),a.forEach(m),this.h()},h(){g(n,"class","navbar"),g(l,"class","overflow-y-auto p-2.5"),g(t,"class","grid grid-rows-[auto,1fr]"),F(t,"height","100vh"),F(t,"height","100dvh")},m(s,a){P(s,t,a),d(t,n),j(e,n,null),d(t,h),d(t,l);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(l,null);o=!0},p(s,[a]){const f={};if(a&8199&&(f.$$scope={dirty:a,ctx:s}),e.$set(f),a&15){_=te(J(s[2].data.highlights,s[0]));let c;for(c=0;c<_.length;c+=1){const v=ae(s,_,c);r[c]?(r[c].p(v,a),w(r[c],1)):(r[c]=oe(v),r[c].c(),w(r[c],1),r[c].m(l,null))}for(Se(),c=_.length;c<r.length;c+=1)k(c);pe()}},i(s){if(!o){w(e.$$.fragment,s);for(let a=0;a<_.length;a+=1)w(r[a]);o=!0}},o(s){y(e.$$.fragment,s),r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)y(r[a]);o=!1},d(s){s&&m(t),T(e),be(r,s)}}}function Le(i,t,n){let e,h;ee(i,ue,f=>n(1,e=f)),ee(i,Ie,f=>n(2,h=f));async function l(f,c){switch(f.detail.text){case e.Annotation_Menu_View:G.set(c),me(`${X}/`);break;case e.Annotation_Menu_Share:await De(c);break;case e.Annotation_Menu_Delete:await de(c.date);break}}function o(f){switch(f.detail.text){case e.Annotation_Sort_Order_Reference:n(0,r=we);break;case e.Annotation_Sort_Order_Date:n(0,r=ne);break;case e.Annotation_Sort_Order_Color:n(0,r=Ce);break}}const _={actions:[e.Annotation_Sort_Order_Reference,e.Annotation_Sort_Order_Date,e.Annotation_Sort_Order_Color]};let r=ne;return[r,e,h,l,o,_,async()=>await ye(J(h.data.highlights,r)),f=>o(f),(f,c)=>l(c,f)]}class Ye extends le{constructor(t){super(),ie(this,t,Le,Be,re,{})}}export{Ye as component,We as universal};
