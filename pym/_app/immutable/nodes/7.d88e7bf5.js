import{g as x,c as ee}from"../chunks/history.d5572e27.js";import{c as A,x as te,t as re}from"../chunks/theme.752db845.js";import{s as L,r as J,u as K,h as p,d as m,j as d,i as H,v,w as S,f as y,a as T,l as V,g as b,c as B,m as I,z as D,k as M,A as Y,n as C,G as se,F as oe}from"../chunks/scheduler.1839fe44.js";import{S as Z,i as q,b as O,d as z,m as F,a as $,c as ie,t as j,e as P,g as ae}from"../chunks/index.9a9a87ad.js";import{e as Q}from"../chunks/each.821dfe5c.js";import{a as le}from"../chunks/dateUtils.b75773c7.js";import{e as ne}from"../chunks/singletons.a4b0b5e6.js";import{N as ce}from"../chunks/Navbar.3f779d19.js";function fe(s){let t,r;return{c(){t=J("svg"),r=J("path"),this.h()},l(e){t=K(e,"svg",{fill:!0,xmlns:!0,height:!0,viewBox:!0,width:!0});var o=p(t);r=K(o,"path",{d:!0}),p(r).forEach(m),o.forEach(m),this.h()},h(){d(r,"d","M600 816v-80h160v80H600Zm0-320v-80h280v80H600Zm0 160v-80h240v80H600ZM120 416H80v-80h160v-60h160v60h160v80h-40v360q0 33-23.5 56.5T440 856H200q-33 0-56.5-23.5T120 776V416Z"),d(t,"fill",s[0]),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"height","24"),d(t,"viewBox","0 96 960 960"),d(t,"width","24")},m(e,o){H(e,t,o),v(t,r)},p(e,[o]){o&1&&d(t,"fill",e[0])},i:S,o:S,d(e){e&&m(t)}}}function he(s,t,r){let{color:e="black"}=t;return s.$$set=o=>{"color"in o&&r(0,e=o.color)},[e]}class ue extends Z{constructor(t){super(),q(this,t,he,fe,L,{color:0})}}async function de(){return{history:(await x()).filter(r=>A.bookCollections.some(e=>e.id===r.collection))}}const Ce=Object.freeze(Object.defineProperty({__proto__:null,load:de},Symbol.toStringTag,{value:"Module"}));function R(s){let t,r;return{c(){t=y("div"),r=V(s[5]),this.h()},l(e){t=b(e,"DIV",{class:!0});var o=p(t);r=I(o,s[5]),o.forEach(m),this.h()},h(){d(t,"class","history-item-book-collection")},m(e,o){H(e,t,o),v(t,r)},p(e,o){o&32&&C(r,e[5])},d(e){e&&m(t)}}}function me(s){let t,r,e,o,i,f,c,a,k,n,l,_,h,u=s[5]&&R(s);return{c(){t=y("div"),r=y("a"),e=y("div"),u&&u.c(),o=T(),i=y("div"),f=V(s[4]),c=T(),a=V(s[3]),k=T(),n=y("div"),l=V(s[2]),this.h()},l(g){t=b(g,"DIV",{class:!0});var w=p(t);r=b(w,"A",{style:!0,href:!0});var G=p(r);e=b(G,"DIV",{class:!0});var E=p(e);u&&u.l(E),o=B(E),i=b(E,"DIV",{class:!0});var N=p(i);f=I(N,s[4]),c=B(N),a=I(N,s[3]),N.forEach(m),k=B(E),n=b(E,"DIV",{class:!0});var U=p(n);l=I(U,s[2]),U.forEach(m),E.forEach(m),G.forEach(m),w.forEach(m),this.h()},h(){d(i,"class","history-item-reference justify-self-start"),D(i,"justify-self-end",s[1].toLowerCase()==="rtl"),d(n,"class","history-item-date justify-self-start"),d(e,"class","history-card grid grid-cols-1"),D(e,"grid-rows-2",!s[5]),D(e,"grid-rows-3",s[5]),M(r,"text-decoration","none"),d(r,"href",ne+"/"),d(t,"class","history-item-block dy-card w-100 bg-base-100 shadow-lg my-4"),M(t,"direction","ltr")},m(g,w){H(g,t,w),v(t,r),v(r,e),u&&u.m(e,null),v(e,o),v(e,i),v(i,f),v(i,c),v(i,a),v(e,k),v(e,n),v(n,l),_||(h=Y(r,"click",s[9]),_=!0)},p(g,[w]){g[5]?u?u.p(g,w):(u=R(g),u.c(),u.m(e,o)):u&&(u.d(1),u=null),w&16&&C(f,g[4]),w&8&&C(a,g[3]),w&2&&D(i,"justify-self-end",g[1].toLowerCase()==="rtl"),w&4&&C(l,g[2]),w&32&&D(e,"grid-rows-2",!g[5]),w&32&&D(e,"grid-rows-3",g[5])},i:S,o:S,d(g){g&&m(t),u&&u.d(),_=!1,h()}}}function ve(s,t,r){let e,o,i,f,c,a,k,n,{history:l}=t;const _=()=>te.set({docSet:o,book:l.book,chapter:l.chapter,verse:l.verse});return s.$$set=h=>{"history"in h&&r(0,l=h.history)},s.$$.update=()=>{var h;s.$$.dirty&1&&r(7,e=A.bookCollections.find(u=>u.id===l.collection)),s.$$.dirty&128&&r(6,o=e.languageCode+"_"+e.id),s.$$.dirty&128&&r(5,i=A.bookCollections.length==1?null:e.collectionName),s.$$.dirty&129&&r(4,f=(h=e.books.find(u=>u.id===l.book))==null?void 0:h.name),s.$$.dirty&128&&r(8,c=e.features["ref-chapter-verse-separator"]),s.$$.dirty&257&&r(3,a=l.verse?l.chapter+c+l.verse:l.chapter),s.$$.dirty&1&&r(2,k=le(new Date(l.date))),s.$$.dirty&128&&r(1,n=e.style.textDirection)},[l,n,k,a,f,i,o,e,c,_]}class _e extends Z{constructor(t){super(),q(this,t,ve,me,L,{history:0})}}function W(s,t,r){const e=s.slice();return e[3]=t[r],e}function ge(s){let t,r,e=s[1].Menu_History+"",o;return{c(){t=y("label"),r=y("div"),o=V(e),this.h()},l(i){t=b(i,"LABEL",{for:!0,slot:!0});var f=p(t);r=b(f,"DIV",{class:!0});var c=p(r);o=I(c,e),c.forEach(m),f.forEach(m),this.h()},h(){d(r,"class","btn btn-ghost normal-case text-xl"),d(t,"for","sidebar"),d(t,"slot","center")},m(i,f){H(i,t,f),v(t,r),v(r,o)},p(i,f){f&2&&e!==(e=i[1].Menu_History+"")&&C(o,e)},d(i){i&&m(t)}}}function pe(s){let t,r,e,o,i,f;return e=new ue({props:{color:"white"}}),{c(){t=y("div"),r=y("button"),O(e.$$.fragment),this.h()},l(c){t=b(c,"DIV",{slot:!0});var a=p(t);r=b(a,"BUTTON",{class:!0});var k=p(r);z(e.$$.fragment,k),k.forEach(m),a.forEach(m),this.h()},h(){d(r,"class","dy-btn dy-btn-ghost dy-btn-circle"),d(t,"slot","right-buttons")},m(c,a){H(c,t,a),v(t,r),F(e,r,null),o=!0,i||(f=Y(r,"click",s[2]),i=!0)},p:S,i(c){o||($(e.$$.fragment,c),o=!0)},o(c){j(e.$$.fragment,c),o=!1},d(c){c&&m(t),P(e),i=!1,f()}}}function X(s){let t,r;return t=new _e({props:{history:s[3]}}),{c(){O(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,o){F(t,e,o),r=!0},p(e,o){const i={};o&1&&(i.history=e[3]),t.$set(i)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){j(t.$$.fragment,e),r=!1},d(e){P(t,e)}}}function ye(s){let t,r,e,o,i,f;e=new ce({props:{$$slots:{"right-buttons":[pe],center:[ge]},$$scope:{ctx:s}}});let c=Q(s[0].history.reverse()),a=[];for(let n=0;n<c.length;n+=1)a[n]=X(W(s,c,n));const k=n=>j(a[n],1,1,()=>{a[n]=null});return{c(){t=y("div"),r=y("div"),O(e.$$.fragment),o=T(),i=y("div");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){t=b(n,"DIV",{class:!0,style:!0});var l=p(t);r=b(l,"DIV",{class:!0});var _=p(r);z(e.$$.fragment,_),_.forEach(m),o=B(l),i=b(l,"DIV",{class:!0});var h=p(i);for(let u=0;u<a.length;u+=1)a[u].l(h);h.forEach(m),l.forEach(m),this.h()},h(){d(r,"class","navbar"),d(i,"class","overflow-y-auto p-2.5"),d(t,"class","grid grid-rows-[auto,1fr]"),M(t,"height","100vh"),M(t,"height","100dvh")},m(n,l){H(n,t,l),v(t,r),F(e,r,null),v(t,o),v(t,i);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(i,null);f=!0},p(n,[l]){const _={};if(l&66&&(_.$$scope={dirty:l,ctx:n}),e.$set(_),l&1){c=Q(n[0].history.reverse());let h;for(h=0;h<c.length;h+=1){const u=W(n,c,h);a[h]?(a[h].p(u,l),$(a[h],1)):(a[h]=X(u),a[h].c(),$(a[h],1),a[h].m(i,null))}for(ae(),h=c.length;h<a.length;h+=1)k(h);ie()}},i(n){if(!f){$(e.$$.fragment,n);for(let l=0;l<c.length;l+=1)$(a[l]);f=!0}},o(n){j(e.$$.fragment,n),a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)j(a[l]);f=!1},d(n){n&&m(t),P(e),se(a,n)}}}function be(s,t,r){let e;oe(s,re,f=>r(1,e=f));let{data:o}=t;async function i(){await ee(),r(0,o.history=[],o)}return s.$$set=f=>{"data"in f&&r(0,o=f.data)},[o,e,i]}class je extends Z{constructor(t){super(),q(this,t,be,ye,L,{data:0})}}export{je as component,Ce as universal};
